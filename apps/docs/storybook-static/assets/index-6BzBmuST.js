import{r as i,a as S}from"./index-D4H_InIO.js";import{u as M,a as A}from"./index-CfoW25g2.js";import{u as P}from"./index-C5cekbTF.js";function b(n,e,{checkForDefaultPrevented:o=!0}={}){return function(r){if(n==null||n(r),o===!1||!r.defaultPrevented)return e==null?void 0:e(r)}}function D({prop:n,defaultProp:e,onChange:o=()=>{}}){const[t,r]=I({defaultProp:e,onChange:o}),a=n!==void 0,l=a?n:t,d=M(o),c=i.useCallback(s=>{if(a){const u=typeof s=="function"?s(n):s;u!==n&&d(u)}else r(s)},[a,n,r,d]);return[l,c]}function I({defaultProp:n,onChange:e}){const o=i.useState(n),[t]=o,r=i.useRef(t),a=M(e);return i.useEffect(()=>{r.current!==t&&(a(t),r.current=t)},[t,r,a]),o}function T(n,e){return i.useReducer((o,t)=>e[o][t]??o,n)}var h=n=>{const{present:e,children:o}=n,t=v(e),r=typeof o=="function"?o({present:t.isPresent}):i.Children.only(o),a=P(t.ref,U(r));return typeof o=="function"||t.isPresent?i.cloneElement(r,{ref:a}):null};h.displayName="Presence";function v(n){const[e,o]=i.useState(),t=i.useRef({}),r=i.useRef(n),a=i.useRef("none"),l=n?"mounted":"unmounted",[d,c]=T(l,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return i.useEffect(()=>{const s=p(t.current);a.current=d==="mounted"?s:"none"},[d]),A(()=>{const s=t.current,m=r.current;if(m!==n){const N=a.current,f=p(s);n?c("MOUNT"):f==="none"||(s==null?void 0:s.display)==="none"?c("UNMOUNT"):c(m&&N!==f?"ANIMATION_OUT":"UNMOUNT"),r.current=n}},[n,c]),A(()=>{if(e){let s;const m=e.ownerDocument.defaultView??window,u=f=>{const g=p(t.current).includes(f.animationName);if(f.target===e&&g&&(c("ANIMATION_END"),!r.current)){const O=e.style.animationFillMode;e.style.animationFillMode="forwards",s=m.setTimeout(()=>{e.style.animationFillMode==="forwards"&&(e.style.animationFillMode=O)})}},N=f=>{f.target===e&&(a.current=p(t.current))};return e.addEventListener("animationstart",N),e.addEventListener("animationcancel",u),e.addEventListener("animationend",u),()=>{m.clearTimeout(s),e.removeEventListener("animationstart",N),e.removeEventListener("animationcancel",u),e.removeEventListener("animationend",u)}}else c("ANIMATION_END")},[e,c]),{isPresent:["mounted","unmountSuspended"].includes(d),ref:i.useCallback(s=>{s&&(t.current=getComputedStyle(s)),o(s)},[])}}function p(n){return(n==null?void 0:n.animationName)||"none"}function U(n){var t,r;let e=(t=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:t.get,o=e&&"isReactWarning"in e&&e.isReactWarning;return o?n.ref:(e=(r=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:r.get,o=e&&"isReactWarning"in e&&e.isReactWarning,o?n.props.ref:n.props.ref||n.ref)}var C=S.useId||(()=>{}),w=0;function W(n){const[e,o]=i.useState(C());return A(()=>{o(t=>t??String(w++))},[n]),e?`radix-${e}`:""}export{h as P,W as a,b as c,D as u};
